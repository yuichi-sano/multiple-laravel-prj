## ken_allの分割機能概要
* メインメソッド → ZipCodeFactory->splitRow
* 分割処理要否の判定 → ZipCodeFactory->needSplit

### 1. 実装機能の概要
* ken_all内に存在する特定のレコードを分割する
* 分割するレコードには特定のパターンが複数存在するため、そのパターン別に対応を行う

### 2.分割する対象 
#### 2.1.主町域・従属町域パターン
* 単一のレコードの下記属性が複数の情報を保持しているもの
  1. 町域属性(インデックス8)
    * `主な町域（従属する町域1、従属する町域2、...従属する町域n）`の形式で記入されている
  2. 町域カナ属性(インデックス5)
    * `主な町域(従属する町域1，従属する町域2，...従属する町域n)`の形式で記入されている
* ken_allには、1と2両方を満たすものと、1のみを満たすものが存在している

### 3.分割の対象外
__TBD__

### 4.分割したレコード内容
#### 4.1.主町域・従属町域パターン
* 従属する町域の数だけ下記のレコードを生成する
  1. 町域属性と町域カナ属性に、主な町域と従属する町域を結合した値を挿入
  2. それ以外の属性は分割元と同じ値を挿入
* ただし、分割元で町域カナ属性が従属する町域を保していない場合は、分割元と同じ値を挿入

### 5.実装方法
#### 5.1.主町域・従属町域パターン
1.分割要否の判断
2.分割するレコードに挿入する値を抽出
3.新しいレコードを生成
##### 5.1.1 分割要否の判断
  1. レコードの町域属性の値を読み取り、区切り文字（、）の存在有無を確認
    * 区切り文字が使用していれば分割対象とみなす
##### 5.1.2. 分割するレコードに挿入する値を抽出
1. 分割対象から、正規表現を用いて下記4点の値を抽出する
  1. 町域属性の主な町域
  2. 町域属性の従属する町域（配列形式）
  3. 町域カナ属性の従属する町域
  4. 町域カナ属性の従属する町域（配列形式）

##### 5.1.3 新しいレコードを生成
1. 分割したレコードを格納する配列を用意
2. 抽出した町域属性の従属する町域の回数だけ、下記を実行する
  1. テンプレートとなるレコードを生成（レコード内で差分の存在しない属性値を挿入したもの）
  2. 差分となる目次3.2.で抽出した値をレコードに挿入
  3. 分割したレコードを格納する配列にレコードを挿入
2. 本機能呼び出し元へ分割したレコードを格納した配列を返却
持

### TODO
1. 分割対象となるほかパターンの調査とその対応方法の検討
2. 分割非対象となるパターンの調査
3. タイプヒンティング、パラメーターのアノテーション記載
4. 大口の郵便番号への対応？
5. マジックナンバーの定数化（優先度低）
